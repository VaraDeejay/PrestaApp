<ion-header color="primary">
  <ion-toolbar color="primary">
    <ion-buttons color="secondary" slot="start">
      <ion-button color="tertiary" (click)="atrasHome()" ><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
    </ion-buttons>
    
  </ion-toolbar>
</ion-header>
<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title mode="md" class="ion-no-padding">
      <ion-label >
        <ion-text color="secondary">Estas son tus</ion-text>
        <p><ion-text color="white"><strong>Alcancias</strong></ion-text></p>
        
      </ion-label>
    </ion-title>
    <ion-avatar slot="end">
      <img src="./assets/img/PrestaIconoPositivo.png" />
    </ion-avatar>
  </ion-toolbar>
</ion-header>
    
    
  



<ion-content scrollY="true" mode="ios" color="primary">

  
 

 <ion-card color="primary" class="banners">

  <ion-card-title class="ion-text-center" style="font-size: 18px;">Dinero</ion-card-title>
  <div class="card-container">
    
  

  <ion-card  *ngFor="let alcancia of alcancias" class="custom-card" (click)="detallesAlcancia(alcancia)">
    <img alt="Silhouette of mountains" src="./assets/img/PrestaAlcancia.png" />
    <ion-card-header  >
      <ion-card-title style="font-size: 10px;" >Administrador</ion-card-title>
      <ion-card-subtitle>{{alcancia.creador.id}}</ion-card-subtitle>
    </ion-card-header>
  
    <ion-card-content>

      <ion-list>
        <ion-item  style="font-size: 16px;">
          <strong>Recibes: ${{alcancia.alcancia.montoARecibir}}</strong>
        </ion-item>
        
        <ion-item  style="font-size: 12px;">
          Cuotas: ${{alcancia.alcancia.montoCuotas}}
        </ion-item>
        <ion-item  style="font-size: 12px;">
          Integrantes: {{alcancia.alcancia.integrantes}}
        </ion-item>
        <ion-item  style="font-size: 12px;">
          Pago cada {{alcancia.alcancia.modalidad}} días.
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  
</div>



</ion-card>



<ion-card color="primary" class="banners">

  <ion-card-title class="ion-text-center" style="font-size: 18px;">Productos</ion-card-title>
  <div class="card-container">
   
  

  <ion-card  *ngFor="let alcancias of alcanciasProductos" class="custom-card" (click)="detallesAlcancia(alcancia)">
    <img alt="Silhouette of mountains" src="./assets/img/PrestaAlcancia.png" />
    <ion-card-header  >
      
      <ion-card-subtitle>{{alcancias.alcancia.nombreProducto}}</ion-card-subtitle>
    </ion-card-header>
  
    <ion-card-content>

      <ion-list>
        <ion-item  style="font-size: 16px;">
          <strong>Costo: ${{alcancias.alcancia.costoProducto}}</strong>
        </ion-item>
        
        <ion-item  style="font-size: 12px;">
          Cuotas: ${{alcancias.alcancia.montoCuotas}}
        </ion-item>
        <ion-item  style="font-size: 12px;">
          Integrantes: {{alcancias.alcancia.integrantes}}
        </ion-item>
        <ion-item  style="font-size: 12px;">
          Pago cada {{alcancias.alcancia.modalidad}} días.
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  
</div>



</ion-card>
<img src="./assets/img/PrestaLogoPositivo.png" alt="">



</ion-content>


  












<ion-modal mode="ios" #modal>
  <ng-template>
    <ion-header color="primary">
      <ion-toolbar color="primary">
        <ion-buttons color="secondary" slot="start">
          <ion-button color="tertiary" (click)="cerrarDetalles()"  ><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
        </ion-buttons>
        
      </ion-toolbar>
    </ion-header>
    <ion-header class="ion-no-border">
      <ion-toolbar color="primary">
        <ion-title mode="md" class="ion-no-padding">
          <ion-label >
            <ion-text color="secondary">Detalles</ion-text>
            <p><ion-text color="white"><strong>Alcancia</strong></ion-text></p>
            
          </ion-label>
        </ion-title>
        <ion-avatar slot="end">
          <img src="./assets/img/PrestaIconoPositivo.png" />
        </ion-avatar>
      </ion-toolbar>
    </ion-header>
    
    <ion-content scrollY="true" mode="ios" color="primary">
     
    
     <ion-content color="primary">
      
    <ion-grid>
      
      <ion-card>
        <img alt="Silhouette of mountains" src="./assets/img/PrestaAlcancia.png" />
      <ion-row>
        <ion-col>
    <ion-card>
      <ion-card-content>
      <ion-card-subtitle>
        Monto a recibir: 
       
          <ion-card-title class="custom-input" style="font-size: 32px;">${{alcanciaSeleccionada.alcancia.montoARecibir}}</ion-card-title>
       
      </ion-card-subtitle>
    </ion-card-content>
    </ion-card>
    <ion-card>
    <ion-button (click)="openModalTurnos()">
      Pagar cuotas
    </ion-button>
    </ion-card>
    </ion-col>
    <ion-col>
    <ion-card>
      <ion-card-content>
        <ion-card-title>${{alcanciaSeleccionada.alcancia.montoCuotas}}</ion-card-title>
        <ion-card-subtitle>Cuotas</ion-card-subtitle>
        
      </ion-card-content>
    </ion-card>
    <ion-card>
      <ion-card-content>
        <ion-card-title>{{abonado}}$</ion-card-title>
        <ion-card-subtitle>Abonado</ion-card-subtitle>
      </ion-card-content>
    </ion-card>
    </ion-col>
    </ion-row>
    <ion-row>
      <ion-card color="success">
        <ion-card-content>
      <ion-card-title  style="font-size: 20px;">Dias para proxima cuota: {{diferenciaEnDias | async}}</ion-card-title>
    </ion-card-content>
    </ion-card>
    </ion-row>
    
    </ion-card>
    </ion-grid>
    <ion-grid>
      
      <ion-row>
       <ion-col size="6">
        <ion-card *ngIf="turnoSeleccionado">
          <ion-card-content>
            <ion-card-title style="font-size: 18px;">Turno {{turnoSeleccionado.id}} de {{alcanciaSeleccionada.alcancia.integrantes}} | Fecha:{{turnoSeleccionado.data.fechaDeturno | date}}</ion-card-title>
            <ion-card-subtitle>Turno actual:<hr>{{turnoSeleccionado.data.nombre}}</ion-card-subtitle>
            
          </ion-card-content>
        </ion-card>
       </ion-col>
       <ion-col size="6">
        <ion-card *ngIf="docId && fechaDeturno">
          <ion-card-content>
            <ion-card-title style="font-size: 18px;">Tu turno: Turno {{docId}} | Fecha:{{fechaDeturno | date}}</ion-card-title>
            <ion-card-subtitle></ion-card-subtitle>
            <ion-button (click)="openModalPagosTurnos(alcanciaSeleccionada)" >Ver turnos</ion-button>
            
          </ion-card-content>
        </ion-card>
    
       </ion-col>
    </ion-row>
    </ion-grid>
    
    </ion-content>
       
    
    </ion-content>
    
  </ng-template>
</ion-modal>





<ion-modal md="ios" #modalTurnos>
  <ng-template>
    
    <ion-header color="primary">
      <ion-toolbar color="primary">
        <ion-buttons color="secondary" slot="start">
          <ion-button color="tertiary" (click)="cerrarModalTurnos()" ><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
        </ion-buttons>
        
      </ion-toolbar>
    </ion-header>
    <ion-header class="ion-no-border">
      <ion-toolbar color="primary">
        <ion-title mode="md" class="ion-no-padding">
          <ion-label >
            <ion-text color="secondary">Detalles</ion-text>
            <p><ion-text color="white"><strong>Turnos</strong></ion-text></p>
            
          </ion-label>
        </ion-title>
        <ion-avatar slot="end">
          <img src="./assets/img/PrestaIconoPositivo.png" />
        </ion-avatar>
      </ion-toolbar>
    </ion-header>
    
    <ion-content scrollY="true" mode="ios" color="primary">
     
    
     <ion-content color="primary">
      
    <ion-grid>
      
      <ion-card>
        <img alt="Silhouette of mountains" src="./assets/img/PrestaEnviar.png" />
      <ion-row>
        <ion-col>
    <ion-card class="ion-padding" *ngFor="let turno of turnos" color="success">
      <ion-card-content class="ion-text-center">
      <ion-card-subtitle>
        Turno {{turno.id}}: {{turno.fechaDeturno.toDate() | date }} 
       
          <ion-card-title class="custom-input" style="font-size: 12px;">{{turno.nombre}}<ion-button (click)="openModalPagar(turno)" style="font-size: 8px;">Pagar cuota</ion-button></ion-card-title>
       
      </ion-card-subtitle>
      <ion-card-subtitle>
       
       
        <ion-card-title class="custom-input" style="font-size: 12px;"> Dias restantes: {{turno.diferenciaEnDiasDetalles }}</ion-card-title>
     
    </ion-card-subtitle>
    </ion-card-content>
    </ion-card>
    
    
    </ion-col>
    
    </ion-row>
    <ion-row>
     
    </ion-row>
    
    </ion-card>
    </ion-grid>
    
    </ion-content>
       
    
    </ion-content>
    
        
      </ng-template>
    </ion-modal>

    <ion-modal #modalPagar>
      <ng-template >

        <ion-header color="primary">
          <ion-toolbar color="primary">
            <ion-buttons color="secondary" slot="start">
              <ion-button color="tertiary" (click)="cerrarModalPagar()" ><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
            </ion-buttons>
            
          </ion-toolbar>
        </ion-header>
        <ion-header class="ion-no-border">
          <ion-toolbar color="primary">
            <ion-title mode="md" class="ion-no-padding">
              <ion-label >
                <ion-text color="secondary">Pagar</ion-text>
                <p><ion-text color="white"><strong>Cuotas</strong></ion-text></p>
                
              </ion-label>
            </ion-title>
            <ion-avatar slot="end">
              <img src="./assets/img/PrestaIconoPositivo.png" />
            </ion-avatar>
          </ion-toolbar>
        </ion-header>
        
        <ion-content scrollY="true" mode="ios" color="primary">
         
        
         <ion-content color="primary">
          
        <ion-grid>
          
          <ion-card>
            <img alt="Silhouette of mountains" src="./assets/img/PrestaEnviar.png" />
          <ion-row>
            <ion-col>
        <ion-card color="success">
          <ion-card-content>
          <ion-card-subtitle style="text-align: center;">
            Turno {{turno.id}}: {{turno.fechaDeturno.toDate() | date}}
           
           
         <ion-card-subtitle> <ion-input color="success" [value]="turno.nombre" readonly class="custom-inputinput" style="font-size: 16px; text-align: center;"></ion-input></ion-card-subtitle>
           
          </ion-card-subtitle>
          <ion-card-subtitle>
           
            
            
         
        </ion-card-subtitle>
        </ion-card-content>
        </ion-card>
        <ion-card class="ion-padding">
          <ion-card-content class="ion-text-center">
            <ion-card-subtitle style="text-align: center;">
             Monto a debitar ($):

                
             
                <ion-input [value]="alcanciaSeleccionada.alcancia.montoCuotas" type="number" class="custom-input" style="font-size: 72px; text-align: center;"></ion-input>
             
            </ion-card-subtitle>
            <ion-card-subtitle>
             
              <ion-button (click)="pagarCuota(turno.nombre, alcanciaSeleccionada.alcancia.montoCuotas, alcanciaSeleccionada.id, turno.id)" color="success">Pagar</ion-button>
              
           
          </ion-card-subtitle>
          </ion-card-content>
        </ion-card>
        </ion-col>
        
        </ion-row>
        <ion-row>
         
        </ion-row>
        
        </ion-card>
        </ion-grid>
        
        </ion-content>
           
        
        </ion-content>
        




      </ng-template>
      
    </ion-modal>






    <ion-modal #modalPagosTurnos>
      <ng-template >
        <ion-header color="primary">
          <ion-toolbar color="primary">
            <ion-buttons color="secondary" slot="start">
              <ion-button color="tertiary" (click)="cerrarModalPagosTurnos()"  ><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
            </ion-buttons>
            
          </ion-toolbar>
        </ion-header>
        <ion-header class="ion-no-border">
          <ion-toolbar color="primary">
            <ion-title mode="md" class="ion-no-padding">
              <ion-label >
                <ion-text color="secondary">Detalles</ion-text>
                <p><ion-text color="white"><strong>Turnos</strong></ion-text></p>
                
              </ion-label>
            </ion-title>
            <ion-avatar slot="end">
              <img src="./assets/img/PrestaIconoPositivo.png" />
            </ion-avatar>
          </ion-toolbar>
        </ion-header>
        
        <ion-content mode="ios" color="primary">
         
        
         
          
        <ion-grid class="gridoption">
          
          <ion-card> 
            <ion-card-header>
            <img alt="Silhouette of mountains" src="./assets/img/PrestaTurnosAlcancia.png" /></ion-card-header>
            
            
          <ion-row color="primary" class="scroll-x">
            <div class="horizontal-scroll">
            
        <ion-col *ngFor="let turno of turnos" >
        <ion-card  color="success">
          <ion-card-content>
        
            
          <ion-card-subtitle style="text-align: center;">
            Turno {{turno.id}}: {{turno.fechaDeturno.toDate() | date}}
           
              <ion-card-title class="custom-input" style="font-size: 16px; text-align: center;">{{turno.nombre}}</ion-card-title>
           
          </ion-card-subtitle>
          <ion-card-subtitle>
           
            
            
         
        </ion-card-subtitle>
        </ion-card-content>
        </ion-card>
        <ion-card  class="ion-padding">
          <ion-card-content class="ion-text-center">
            <ion-card class="ion-padding"><ion-card-content>
            <ion-card-subtitle *ngIf="filtrarTransaccionesPorTurno(turno.id).length > 0"  color="success" style="text-align: center;">
             Pagos registrados:
             
                <ion-card-title *ngFor="let transaccion of filtrarTransaccionesPorTurno(turno.id)"  class="custom-input" style="font-size: 14px; text-align: center;">{{transaccion.remitente.nombres}}</ion-card-title>
             
            </ion-card-subtitle>
          </ion-card-content></ion-card>
          <ion-card  class="ion-padding">
            <ion-card-content>
            <ion-card-subtitle color="warning" style="text-align: center;">
              Integrantes:
              
                 <ion-card-title *ngFor="let integrante of datosAlcancia.integrantes" class="custom-input" style="font-size: 14px; text-align: center;"
                 >{{integrante.nombres}}</ion-card-title>
                 
              
             </ion-card-subtitle>
           
          </ion-card-content>
        </ion-card>
        </ion-card-content></ion-card>
        </ion-col>
        
      
        
        </div>
        
        </ion-row>
        
        
        </ion-card>
        </ion-grid>
        
        
           
        
        </ion-content>
        
      </ng-template>
      
    </ion-modal>
